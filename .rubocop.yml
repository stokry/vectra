require:
  - rubocop-rspec

AllCops:
  TargetRubyVersion: 3.2
  NewCops: enable
  SuggestExtensions: false
  Exclude:
    - 'vendor/**/*'
    - 'tmp/**/*'
    - 'bin/**/*'
    - 'node_modules/**/*'
    - 'lib/generators/**/templates/**/*'

# Layout
Layout/LineLength:
  Max: 185
  AllowedPatterns:
    - '\A\s*#' # Allow long comment lines
  Exclude:
    - 'vectra.gemspec'

Layout/MultilineMethodCallIndentation:
  EnforcedStyle: indented

# Metrics
Metrics/BlockLength:
  Exclude:
    - 'spec/**/*'
    - 'vectra.gemspec'
    - 'Rakefile'
    - 'benchmarks/**/*'
  AllowedMethods:
    - 'included'
    - 'class_methods'

Metrics/MethodLength:
  Max: 30
  Exclude:
    - 'spec/**/*'

Metrics/AbcSize:
  Max: 30
  Exclude:
    - 'spec/**/*'

Metrics/ClassLength:
  Max: 250
  Exclude:
    - 'spec/**/*'

Metrics/ModuleLength:
  Exclude:
    - 'spec/**/*'

Metrics/CyclomaticComplexity:
  Max: 10

Metrics/PerceivedComplexity:
  Max: 10

Metrics/ParameterLists:
  Max: 7
  CountKeywordArgs: false

# Style
Style/Documentation:
  Enabled: false # We use YARD documentation

Style/StringLiterals:
  EnforcedStyle: double_quotes

Style/StringLiteralsInInterpolation:
  Enabled: false # Allow both single and double quotes

Style/ArgumentsForwarding:
  Enabled: false # Ruby 3.2+ feature, but not required

Style/IfUnlessModifier:
  Enabled: false # Allow multi-line if/unless for clarity

Style/FrozenStringLiteralComment:
  Enabled: true
  EnforcedStyle: always

Style/SymbolArray:
  Enabled: false

Style/WordArray:
  Enabled: false

Style/TrailingCommaInArrayLiteral:
  EnforcedStyleForMultiline: no_comma

Style/TrailingCommaInHashLiteral:
  EnforcedStyleForMultiline: no_comma

Style/TrailingCommaInArguments:
  EnforcedStyleForMultiline: no_comma

Style/MapIntoArray:
  Enabled: false

# Naming
Naming/MethodParameterName:
  AllowedNames:
    - id
    - to
    - db
    - io
    - n

Naming/PredicatePrefix:
  Enabled: false # Allow has_vector DSL method

Naming/MemoizedInstanceVariableName:
  Enabled: false # Allow descriptive names

# Lint
Lint/MissingSuper:
  Enabled: false # Allow classes without super calls

Lint/ScriptPermission:
  Enabled: false

Lint/RedundantDirGlobSort:
  Enabled: false

# RSpec specific
RSpec/ExampleLength:
  Max: 25

RSpec/MultipleExpectations:
  Max: 10

RSpec/MultipleMemoizedHelpers:
  Max: 10

RSpec/NestedGroups:
  Max: 5

RSpec/DescribeClass:
  Enabled: false

RSpec/ContextWording:
  Enabled: false

RSpec/MessageSpies:
  Enabled: false # Allow both have_received and receive

RSpec/IdenticalEqualityAssertion:
  Enabled: false

RSpec/VerifiedDoubles:
  Enabled: false

RSpec/MultipleDescribes:
  Enabled: false

RSpec/LeadingSubject:
  Enabled: false

RSpec/NamedSubject:
  Enabled: false

RSpec/SubjectStub:
  Enabled: false

RSpec/DescribedClass:
  Enabled: false

# Gemspec
Gemspec/DevelopmentDependencies:
  Enabled: false

Gemspec/OrderedDependencies:
  Enabled: false

# Capybara - disable all (causes errors and not needed for this project)
Capybara/RSpec/PredicateMatcher:
  Enabled: false

Capybara/CurrentPathExpectation:
  Enabled: false

Capybara/MatchStyle:
  Enabled: false

Capybara/NegationMatcher:
  Enabled: false

Capybara/SpecificActions:
  Enabled: false

Capybara/SpecificFinders:
  Enabled: false

Capybara/SpecificMatcher:
  Enabled: false

Capybara/VisibilityMatcher:
  Enabled: false

# FactoryBot - not used in this project
FactoryBot/AttributeDefinedStatically:
  Enabled: false

FactoryBot/ConsistentParenthesesStyle:
  Enabled: false

FactoryBot/CreateList:
  Enabled: false

FactoryBot/FactoryClassName:
  Enabled: false

FactoryBot/FactoryNameStyle:
  Enabled: false

FactoryBot/SyntaxMethods:
  Enabled: false

# RSpecRails - not used in this project
RSpecRails/AvoidSetupHook:
  Enabled: false

RSpecRails/HaveHttpStatus:
  Enabled: false

RSpecRails/HttpStatus:
  Enabled: false

RSpecRails/InferredSpecType:
  Enabled: false

RSpecRails/MinitestAssertions:
  Enabled: false

RSpecRails/NegationBeValid:
  Enabled: false

RSpecRails/TravelAround:
  Enabled: false
